<main class="flex justify-center">
    <div class="p-4 max-w-xl w-full h-auto border border-primary-dark bg-secondary-light rounded-lg">
        <div class="flex justify-between items-center">
            <h1 class="font-semibold text-xl mb-3">Location Form</h1>
            <button (click)="closeForm()" class="text-gray-500 hover:text-red-600">
                <i class="fa-solid fa-xmark fa-lg"></i>
            </button>
        </div>
        
        <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="space-y-4">

                <div class="form-group">
                    <label for="oldPassword" class="mb-1.5 ml-2.5 block text-sm font-semibold">Old Password</label>
                    <input id="oldPassword" type="password" formControlName="oldPassword"
                        class="form-input border border-primary-dark rounded-md block px-2 h-8 w-full" required>
                    <div *ngIf="changePasswordForm.get('oldPassword')?.touched && changePasswordForm.get('oldPassword')?.invalid"
                        class="text-red-500 text-sm mt-1">
                        <span *ngIf="changePasswordForm.get('oldPassword')?.errors?.['required']">Old password is required</span>
                    </div>
                </div>

            <hr class="border-primary-dark">

                <div class="form-group">
                    <label for="newPassword" class="mb-1.5 ml-2.5 block text-sm font-semibold">New Password</label>
                    <input id="newPassword" type="password" formControlName="newPassword"
                        class="form-input border border-primary-dark rounded-md block px-2 h-8 w-full" required>
                    <div *ngIf="changePasswordForm.get('newPassword')?.touched && changePasswordForm.get('newPassword')?.invalid"
                        class="text-red-500 text-sm mt-1">
                        <span *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">New password is required</span>
                    </div>
                    <div *ngIf="changePasswordForm.errors?.['passwordSameAsOld']" class="text-red-500 text-sm mt-1">
                        New password cannot be the same as the old password.
                    </div>
                    
                </div>

                <div class="form-group">
                    <label for="repeatPassword" class="mb-1.5 ml-2.5 block text-sm font-semibold">Repeat Password</label>
                    <input id="repeatPassword" type="password" formControlName="repeatPassword"
                        class="form-input border border-primary-dark rounded-md block px-2 h-8 w-full" required>
                    <div *ngIf="changePasswordForm.get('repeatPassword')?.touched && changePasswordForm.get('repeatPassword')?.invalid"
                        class="text-red-500 text-sm mt-1">
                        <span *ngIf="changePasswordForm.get('repeatPassword')?.errors?.['required']">Repeat password is required</span>
                    </div>
                    <div *ngIf="changePasswordForm.errors?.['passwordMismatch']"
                        class="text-red-500 text-sm mt-1">
                        Passwords do not match.
                    </div>
                </div>

            <button type="submit"
                [ngClass]="{ 'bg-primary-dark hover:bg-primary-light': !changePasswordForm.invalid, 'bg-gray-300 text-gray-500': changePasswordForm.invalid }"
                class="py-sm px-md text-white flex self-end" [disabled]="changePasswordForm.invalid">
                Save
            </button>

        </form>
    </div>
</main>